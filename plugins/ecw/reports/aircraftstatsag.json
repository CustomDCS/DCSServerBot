{
  "color": "blue",
  "title": "Aircraft A/G stats",
  "description": "Fetch stats for all slots and their stats",
  "elements": [
    {
      "type": "Ruler",
      "params": {
        "ruler_length": 25
      }
    },
    {
      "type": "SQLTable",
      "params":  {
	  "sql": "SELECT slot, sum(kills_ground) as \"A/G kills\", CAST(TO_CHAR(SUM(Age(hop_off, hop_on)), 'HH24') AS INTEGER) AS \"Time played (hrs)\" FROM statistics WHERE slot NOT IN ('artillery_commander', 'Windsock', 'SINGLE_HELIPAD', 'Sandbox', 'instructor') AND hop_on > %(hop_on)s::date AND hop_off < %(hop_off)s::date GROUP BY slot HAVING sum(kills_ground) > 0 AND CAST(TO_CHAR(SUM(Age(hop_off, hop_on)), 'HH24') AS INTEGER) >= 5 ORDER BY \"A/G kills\" DESC"
		}	
    }
  ]
}

